{% extends base_template %}

{% block title %}{{ facility.name }} - Facility Usage{% endblock title %}
{% block management_active %}active{% endblock management_active %}

{% block headcss %}
    <link  rel="stylesheet" type="text/css" href="/static/css/management.css" />
{% endblock headcss %}

{% block content %}
<div id="zone_container">

    <div class="titlebar">
        <ul class="titlebar__title">
            {% if org %}
            <li><a href="{% url org_management %}"> {{ org.name }}</a></li>
            {% endif %}
            {% if zone %}
            <li>{% if org %}&gt; {% endif %}<a href="{% url zone_management org_id=org.id zone_id=zone.id %}">{{ zone.name }}</a></li>
            {% endif %}
            <li>{% if zone %}&gt; {% endif %}{{ facility.name }}
                <a class="edit-link" href="{% url facility_form org_id=org.id zone_id=zone.id facility_id=facility.id %}">(edit)</a>
            </li>
        </ul>
    </div>
    
    
    <div class="groups">
        <h2>Groups</h2>

        {% if not groups %}
            <p>You currently have no data available</p>

        {% else %}
            <table class="simple-table">
                <tr>
                    <th width="250px">Group name</th>
                    <th width="100px"># Users</th>
                    <th width="100px">Total Logins</th>
                    <th width="100px">Total Login Time</th>
                    <th width="100px">Total Videos Viewed</th>
                    <th width="100px">Total Exercises Completed</th>
                    <th width="100px">Total Mastery</th>
                </tr>
                {% for id,group in groups.items %}
                    <tr>
                        <td>
                            <a href="{% url group_report org_id=org.id zone_id=zone.id facility_id=facility.id group_id=id %}">{{ group.name }}</a></td>
                        <td>{{ group.total_users }}</td>
                        <td>{{ group.total_logins }}</td>
                        <td>{{ group.total_hours }}</td>
                        <td>{{ group.total_videos }}</td>
                        <td>{{ group.total_exercises }}</td>
                        <td>{{ group.total_mastery }}</td>
                    </tr>

                {% endfor %}
            </table>
        {% endif %}
    </div>


	<div class="users">
        <h2>User Usage Reports</h2>
        
        {% if not users %}
            <p>You currently have no data available</p>

        {% else %}

         <table class="simple-table">
            <tr>
                <tr>
                    <th width="250px">User name</th>
                    <th width="100px">Group</th>
                    <th width="100px">Total Logins</th>
                    <th width="100px">Total Login Time</th>
                    <th width="100px">Total Videos Viewed</th>
                    <th width="100px">Total Exercises Completed</th>
                    <th width="100px">Total Mastery</th>
                </tr>
                {% for id,user in users.items %}
                    <tr>
                        <td>{{ user.last_name }}, {{ user.first_name }}</td>
                        <td>{{ user.group_name }}</td>
                        <td>{{ user.total_logins }}</td>
                        <td>{{ user.total_hours }}</td>
                        <td>{{ user.total_videos }}</td>
                        <td>{{ user.total_exercises }}</td>
                        <td>{{ user.total_mastery }}</td>
                    </tr>

            {% endfor %}

        </table>
        {% endif %}
    </div>

{% endblock content %}